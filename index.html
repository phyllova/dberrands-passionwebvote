<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Access Gate</title>
  <link rel="stylesheet" href="css/preloader.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/feather-icons"></script> <!-- Feather Icons CDN -->
  <script>
    // Ensure Tailwind's dark mode works via the 'class' strategy
    tailwind.config = {
      darkMode: 'class', // Use class-based dark mode
    };
  </script>
</head>

<body
  class="bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-gray-100 flex items-center justify-center min-h-screen transition-all duration-300">

  <!-- Loader Element (Initially Hidden) -->
  <div id="loader" class="hidden absolute inset-0 flex items-center justify-center bg-black bg-opacity-50">
    <svg class="loader" viewBox="0 0 48 30" width="48px" height="30px">
      <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1">
        <g transform="translate(9.5,19)">
          <circle class="loader_tire" r="9" stroke-dasharray="56.549 56.549"></circle>
          <g class="loader_spokes-spin" stroke-dasharray="31.416 31.416" stroke-dashoffset="-23.562">
            <circle class="loader_spokes" r="5"></circle>
            <circle class="loader_spokes" r="5" transform="rotate(180,0,0)"></circle>
          </g>
        </g>
        <g transform="translate(24,19)">
          <g class="loader_pedals-spin" stroke-dasharray="25.133 25.133" stroke-dashoffset="-21.991"
            transform="rotate(67.5,0,0)">
            <circle class="loader_pedals" r="4"></circle>
            <circle class="loader_pedals" r="4" transform="rotate(180,0,0)"></circle>
          </g>
        </g>
        <g transform="translate(38.5,19)">
          <circle class="loader_tire" r="9" stroke-dasharray="56.549 56.549"></circle>
          <g class="loader_spokes-spin" stroke-dasharray="31.416 31.416" stroke-dashoffset="-23.562">
            <circle class="loader_spokes" r="5"></circle>
            <circle class="loader_spokes" r="5" transform="rotate(180,0,0)"></circle>
          </g>
        </g>
        <polyline class="loader_seat" points="14 3,18 3" stroke-dasharray="5 5"></polyline>
        <polyline class="loader_body" points="16 3,24 19,9.5 19,18 8,34 7,24 19" stroke-dasharray="79 79"></polyline>
        <path class="loader_handlebars" d="m30,2h6s1,0,1,1-1,1-1,1" stroke-dasharray="10 10"></path>
        <polyline class="loader_front" points="32.5 2,38.5 19" stroke-dasharray="19 19"></polyline>
      </g>
    </svg>
  </div>

  <div>
    <svg class="loader" viewBox="0 0 48 30" width="48px" height="30px">
      <g fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="1">
        <g transform="translate(9.5,19)">
          <circle class="loader_tire" r="9" stroke-dasharray="56.549 56.549"></circle>
          <g class="loader_spokes-spin" stroke-dasharray="31.416 31.416" stroke-dashoffset="-23.562">
            <circle class="loader_spokes" r="5"></circle>
            <circle class="loader_spokes" r="5" transform="rotate(180,0,0)"></circle>
          </g>
        </g>
        <g transform="translate(24,19)">
          <g class="loader_pedals-spin" stroke-dasharray="25.133 25.133" stroke-dashoffset="-21.991"
            transform="rotate(67.5,0,0)">
            <circle class="loader_pedals" r="4"></circle>
            <circle class="loader_pedals" r="4" transform="rotate(180,0,0)"></circle>
          </g>
        </g>
        <g transform="translate(38.5,19)">
          <circle class="loader_tire" r="9" stroke-dasharray="56.549 56.549"></circle>
          <g class="loader_spokes-spin" stroke-dasharray="31.416 31.416" stroke-dashoffset="-23.562">
            <circle class="loader_spokes" r="5"></circle>
            <circle class="loader_spokes" r="5" transform="rotate(180,0,0)"></circle>
          </g>
        </g>
        <polyline class="loader_seat" points="14 3,18 3" stroke-dasharray="5 5"></polyline>
        <polyline class="loader_body" points="16 3,24 19,9.5 19,18 8,34 7,24 19" stroke-dasharray="79 79"></polyline>
        <path class="loader_handlebars" d="m30,2h6s1,0,1,1-1,1-1,1" stroke-dasharray="10 10"></path>
        <polyline class="loader_front" points="32.5 2,38.5 19" stroke-dasharray="19 19"></polyline>
      </g>
    </svg>
  </div>

  <!-- Light/Dark Mode Toggle Ball -->
  <label class="absolute top-5 right-5 h-8 w-14 cursor-pointer rounded-full bg-gray-300 dark:bg-gray-800 transition">
    <input type="checkbox" id="theme-toggle" class="peer sr-only" />
    <span
      class="absolute inset-y-0 left-1 m-1 w-6 h-6 rounded-full bg-white transition-all peer-checked:translate-x-6"></span>
  </label>

  <form action="/submit" method="POST"
    class="flex flex-col items-center space-y-4 bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg transition-all duration-300"
    id="password-form">
    <div class="relative">
      <!-- Lock icon using Feather Icons -->
      <i data-feather="lock"
        class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-700 dark:text-gray-300"></i>
      <input id="password" name="password"
        class="block w-full pl-10 pr-6 py-3 text-black dark:text-white bg-white dark:bg-gray-700 border border-gray-200 dark:border-gray-600 rounded-full placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring focus:ring-blue-500 focus:border-blue-500 sm:text-sm max-w-[220px]"
        placeholder="******" type="password" onkeydown="checkEnter(event)" oninput="hideErrorMessage()">

      <!-- Eye icon to toggle visibility -->
      <i id="eye-icon"
        class="absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer text-gray-500 dark:text-gray-300"
        onclick="togglePasswordVisibility()">
        <i data-feather="eye"></i>
      </i>
    </div>
    <!-- Error message -->
    <div id="error-message" class="text-red-500 dark:text-red-400 text-sm hidden">
      Incorrect password. Please try again.
    </div>
  </form>

  <script>
    // Initialize Feather Icons
    feather.replace();

    // Check if the user has previously chosen a theme (using localStorage)
    if (localStorage.getItem('theme') === 'dark') {
      document.body.classList.add('dark');
      document.getElementById('theme-toggle').checked = true;
      document.getElementById('password').type = 'text'; // Reveal password field in dark mode
    } else {
      document.body.classList.remove('dark');
      document.getElementById('theme-toggle').checked = false;
      document.getElementById('password').type = 'password'; // Hide password field in light mode
    }

    // Toggle between light and dark mode
    document.getElementById('theme-toggle').addEventListener('change', (event) => {
      if (event.target.checked) {
        document.body.classList.add('dark');
        localStorage.setItem('theme', 'dark'); // Save the dark mode preference
        document.getElementById('password').type = 'text'; // Reveal password field in dark mode
      } else {
        document.body.classList.remove('dark');
        localStorage.setItem('theme', 'light'); // Save the light mode preference
        document.getElementById('password').type = 'password'; // Hide password field in light mode
      }
    });

    // Function to check Enter key press for form submission
    function checkEnter(event) {
      if (event.key === "Enter") {
        event.preventDefault(); // Prevent default action (form submission)
        submitPassword(); // Call the function to check the password
      }
    }

    // Function to submit and validate the password
    function submitPassword() {
      const password = document.getElementById("password").value;

      if (password === "pass") {
        // Show the loader before navigating
        document.getElementById('loader').classList.remove('hidden');

        // Simulate a short delay before redirecting (to show loader)
        setTimeout(function () {
          window.location.href = "check"; // Correct password
        }, 1000); // Adjust delay as needed (1000ms = 1 second)
      } else {
        const errorMessage = document.getElementById("error-message");
        errorMessage.classList.remove("hidden"); // Show error message

        // Hide the error message after 3 seconds (3000ms)
        setTimeout(function () {
          errorMessage.classList.add("hidden");
        }, 3000);
      }
    }

    // Hide the error message when the password is being typed
    function hideErrorMessage() {
      const errorMessage = document.getElementById("error-message");
      if (document.getElementById("password").value === "") {
        errorMessage.classList.add("hidden"); // Hide error message when password field is empty
      }
    }

    // Toggle password visibility
    function togglePasswordVisibility() {
      const passwordField = document.getElementById("password");
      const eyeIcon = document.getElementById("eye-icon");
      if (passwordField.type === "password") {
        passwordField.type = "text";
        eyeIcon.innerHTML = '<i data-feather="eye-off"></i>';
      } else {
        passwordField.type = "password";
        eyeIcon.innerHTML = '<i data-feather="eye"></i>';
      }
      feather.replace(); // Reinitialize Feather icons after changing the icon
    }
  </script>
</body>

</html>